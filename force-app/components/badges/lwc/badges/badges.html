<template>
    <template if:true={renderBadges}>
        <article class="slds-card">
            <div class="slds-card__header slds-grid slds-assistive-text">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__body">
                        <h2 class="slds-card__header-title">
                            <a href="#" class="slds-card__header-link slds-truncate" title="Card Header">
                                <span>Merkelapper</span>
                            </a>
                        </h2>
                    </div>
                </header>
            </div>
            <lightning-layout>
                <lightning-layout-item padding="around-small">
                    <ul class="slds-list_horizontal slds-wrap">
                        <template for:each={badges} for:item="badge">
                            <li class="badge-wrapper slds-item slds-badge badge-neutral" key={badge.label}>
                                <c-badge-popover
                                    pageref={badge.pageref}
                                    link-label={badge.label}
                                    link-url={badge.url}
                                    tooltip="Forhåndsvis"
                                    title="Forhåndsvis"
                                    popover-width={badge.popoverWidth}
                                    onpopoverlinkclick={handlePopoverLinkClick}
                                >
                                    <span slot="body">
                                        <template if:true={badge.isSingleRecord}>
                                            <c-related-records-card-list
                                                records={badge.relatedRecords}
                                            ></c-related-records-card-list>
                                        </template>
                                        <template if:false={badge.isSingleRecord}>
                                            <c-related-records-table records={badge.relatedRecords}>
                                            </c-related-records-table>
                                        </template>
                                    </span>
                                </c-badge-popover>

                                <template if:true={badge.helpText}>
                                    <lightning-helptext content={badge.helpText}></lightning-helptext>
                                </template>
                            </li>
                        </template>
                    </ul>
                </lightning-layout-item>
            </lightning-layout>
        </article>
    </template>
    <template if:false={renderBadges}
        ><div style="margin-bottom: calc(var(--lwc-cardSpacingMargin) * -1)"></div
    ></template>
</template>
